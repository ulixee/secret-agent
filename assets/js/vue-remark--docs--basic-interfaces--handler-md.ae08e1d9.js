(window.webpackJsonp=window.webpackJsonp||[]).push([[209],{"08cE":function(t,s,a){"use strict";a.r(s);var e=a("Ow4o"),n=a("vu0Y"),r=a("pLV6");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}r.a.config.optionMergeStrategies;var p={VueRemarkRoot:n.a},c=function(t){var s=t.options.components=t.options.components||{},a=t.options.computed=t.options.computed||{};Object.keys(p).forEach((function(t){"object"===o(p[t])&&"function"==typeof p[t].render||"function"==typeof p[t]&&"function"==typeof p[t].options.render?s[t]=p[t]:a[t]=function(){return p[t]}}))},v=r.a.config.optionMergeStrategies,i="__vueRemarkFrontMatter",l={excerpt:null,title:"Handler"};var _=function(t){t.options[i]&&(t.options[i]=l),r.a.util.defineReactive(t.options,i,l),t.options.computed=v.computed({$frontmatter:function(){return t.options[i]}},t.options.computed)},u=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("VueRemarkRoot",[a("h1",{attrs:{id:"handler"}},[a("a",{attrs:{href:"#handler","aria-hidden":"true"}},[t._v("#")]),t._v("Handler")]),a("p",[t._v("Handlers provide a simple interface to load-balance many concurrent Agent sessions across one or more "),a("code",{pre:!0},[t._v("SecretAgent Cores")]),t._v(".")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",{pre:!0,attrs:{class:"language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword module"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token imports"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword module"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret-agent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("createAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("goto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://ulixee.org'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDatasetCost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("agent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Agent")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dataset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("goto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("https://ulixee.org")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("dataset"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("href")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("document")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.cost .large-text'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("cost")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" cost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("textContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" links "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("document")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("querySelectorAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a.DatasetSummary'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" link "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" links"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("querySelector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.title'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("textContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" href "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("getAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("dispatchAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("getDatasetCost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      input"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        href"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" results "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("waitForAllDispatches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" results"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" cost "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("output")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("cost")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token console class-name"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Cost of %s is %s'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),a("p",[t._v("Handlers allow you to queue up actions to take as Agents become available. They'll automatically round-robin between available connections. It's a simple way to complete all your scrapes without overloading the local machine or remote browsers.")]),a("h2",{attrs:{id:"constructor"}},[a("a",{attrs:{href:"#constructor","aria-hidden":"true"}},[t._v("#")]),t._v("Constructor")]),a("h3",{attrs:{id:"constructor-1"}},[a("a",{attrs:{href:"#constructor-1","aria-hidden":"true"}},[t._v("#")]),t._v("new Handler"),a("em",[t._v("(...connections)")])]),a("p",[t._v('The Handler constructor takes one or more "connections" to '),a("code",{pre:!0},[t._v("SecretAgent Core")]),t._v(" instances.")]),a("p",[a("code",{pre:!0},[t._v("Cores")]),t._v(' can be located remotely or in the same process. A remote connection includes a "host" parameter that will be connected to via tcp (and needs to be open on any firewalls).')]),a("p",[t._v("Every connection controls how many maximum concurrent Agents should be open at any given time. Requests for Agents will be round-robined between all connections.")]),a("h4",{attrs:{id:"arguments"}},[a("a",{attrs:{href:"#arguments","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Arguments")]),t._v(":")]),a("p",[t._v("Connections can be either:")]),a("ul",[a("li",[t._v("options "),a("code",{pre:!0},[t._v("object")]),t._v(". A set of settings that controls the creation of a "),a("a",{attrs:{href:"/docs/advanced/connection-to-core#options"}},[a("code",{pre:!0},[t._v("connection")])]),t._v(" to a "),a("code",{pre:!0},[t._v("SecretAgent Core")]),t._v("."),a("ul",[a("li",[t._v("host "),a("code",{pre:!0},[t._v("string")]),t._v(". An optional "),a("code",{pre:!0},[t._v("hostname:port")]),t._v(' url that will be used to establish a connection to a SecretAgent Core running on another machine. If no host is provided, a connection to a "locally" running '),a("code",{pre:!0},[t._v("Core")]),t._v(" will be attempted.")]),a("li",[t._v("maxConcurrency "),a("code",{pre:!0},[t._v("number")]),t._v('. The max number of Agents to allow to be dispatched and created at the same time. Agents are "active" until the dispatchAgent callback is complete, or the created Agent is closed. If not provided, this number will match the max allowed by a '),a("code",{pre:!0},[t._v("Core")]),t._v(".")]),a("li",[t._v("agentTimeoutMillis "),a("code",{pre:!0},[t._v("number")]),t._v(". The number of milliseconds to give each Agent in this connection to complete a session. A TimeoutError will be thrown if this time is exceeded.")]),a("li",[t._v("localProxyPortStart "),a("code",{pre:!0},[t._v("number")]),t._v(" defaults to "),a("code",{pre:!0},[t._v("any open port")]),t._v(". Starting internal port to use for the mitm proxy.")]),a("li",[t._v("sessionsDir "),a("code",{pre:!0},[t._v("string")]),t._v(" defaults to "),a("code",{pre:!0},[t._v("os.tmpdir()/.secret-agent")]),t._v(". Directory to store session files and mitm certificates.")]),a("li",[t._v("replayServerPort "),a("code",{pre:!0},[t._v("number")]),t._v('. Port to start a live replay server on. Defaults to "any open port".')])])]),a("li",[t._v("connectionToCore "),a("a",{attrs:{href:"/docs/advanced/connection-to-core#options"}},[a("code",{pre:!0},[t._v("ConnectionToCore")])]),t._v(". A pre-initialized connection to a "),a("code",{pre:!0},[t._v("SecretAgent Core")]),t._v(". You can use this option to pre-check your connection to a remote connection, or to provide customization to the connection.")])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",{pre:!0,attrs:{class:"language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret-agent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" remote "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RemoteConnectionToCore")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10.10.1.1:1588'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" remote"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("connect")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("remote1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    host"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'172.234.22.2:1586'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    maxConcurrency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("createAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),a("h2",{attrs:{id:"properties"}},[a("a",{attrs:{href:"#properties","aria-hidden":"true"}},[t._v("#")]),t._v("Properties")]),a("h3",{attrs:{id:"core-hosts"}},[a("a",{attrs:{href:"#core-hosts","aria-hidden":"true"}},[t._v("#")]),t._v("handler.coreHosts")]),a("p",[t._v("Readonly property returning the resolved list of coreHosts.")]),a("h4",{attrs:{id:"returns-promisestring"}},[a("a",{attrs:{href:"#returns-promisestring","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise<string[]>")])]),a("h3",{attrs:{id:"default-agent-properties"}},[a("a",{attrs:{href:"#default-agent-properties","aria-hidden":"true"}},[t._v("#")]),t._v("handler.defaultAgentOptions")]),a("p",[t._v("Sets default properties to apply to any new Agent created. Accepts any of the configurations that can be provided to "),a("a",{attrs:{href:"#create-agent"}},[a("code",{pre:!0},[t._v("createAgent()")])]),t._v(".")]),a("h4",{attrs:{id:"returns-iagentcreateoptions"}},[a("a",{attrs:{href:"#returns-iagentcreateoptions","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("IAgentCreateOptions")])]),a("p",[t._v("See the "),a("a",{attrs:{href:"/docs/overview/configuration"}},[t._v("Configuration")]),t._v(" page for more details on "),a("code",{pre:!0},[t._v("options")]),t._v(" and its defaults. You may also want to explore "),a("a",{attrs:{href:"/docs/plugins/browser-emulators"}},[t._v("BrowserEmulators")]),t._v(" and "),a("a",{attrs:{href:"/docs/plugins/human-emulators"}},[t._v("HumanEmulators")]),t._v(".")]),a("h4",{attrs:{id:"type-tab"}},[a("a",{attrs:{href:"#type-tab","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Type")]),t._v(": "),a("a",{attrs:{href:"/docs/basic-interfaces/tab"}},[a("code",{pre:!0},[t._v("Tab")])])]),a("h2",{attrs:{id:"methods"}},[a("a",{attrs:{href:"#methods","aria-hidden":"true"}},[t._v("#")]),t._v("Methods")]),a("h3",{attrs:{id:"add-connection"}},[a("a",{attrs:{href:"#add-connection","aria-hidden":"true"}},[t._v("#")]),t._v("handler.addConnectionToCore"),a("em",[t._v("(options | connectionToCore)")])]),a("p",[t._v("Adds a connection to the handler. This method will call connect on the underlying connection.")]),a("p",[t._v("Connection arguments are the same as the constructor arguments for a single connection.")]),a("h4",{attrs:{id:"arguments-1"}},[a("a",{attrs:{href:"#arguments-1","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Arguments")]),t._v(":")]),a("p",[t._v("Can be either:")]),a("ul",[a("li",[t._v("options "),a("code",{pre:!0},[t._v("object")]),t._v(". A set of settings that controls the creation of a "),a("a",{attrs:{href:"/docs/advanced/connection-to-core#options"}},[a("code",{pre:!0},[t._v("connection")])]),t._v(" to a "),a("code",{pre:!0},[t._v("SecretAgent Core")]),t._v(". (see "),a("a",{attrs:{href:"#constructor"}},[a("code",{pre:!0},[t._v("constructor")])]),t._v(")")]),a("li",[t._v("connectionToCore "),a("a",{attrs:{href:"/docs/advanced/connection-to-core#options"}},[a("code",{pre:!0},[t._v("ConnectionToCore")])]),t._v(". A pre-initialized connection to a "),a("code",{pre:!0},[t._v("SecretAgent Core")]),t._v(".")])]),a("h4",{attrs:{id:"returns-promisevoid"}},[a("a",{attrs:{href:"#returns-promisevoid","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise<void>")])]),a("h3",{attrs:{id:"close-connection"}},[a("a",{attrs:{href:"#close-connection","aria-hidden":"true"}},[t._v("#")]),t._v("handler.closeConnectionToCore"),a("em",[t._v("(coreHost)")])]),a("p",[t._v('Closes and disconnects a connection from core. Agents "in-process" will throw '),a("code",{pre:!0},[t._v("DisconnectedFromCoreError")]),t._v(" on active commands.")]),a("h4",{attrs:{id:"arguments-2"}},[a("a",{attrs:{href:"#arguments-2","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Arguments")]),t._v(":")]),a("ul",[a("li",[t._v("coreHost "),a("code",{pre:!0},[t._v("string")]),t._v(". The coreHost connection.")])]),a("h4",{attrs:{id:"returns-promisevoid-1"}},[a("a",{attrs:{href:"#returns-promisevoid-1","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise<void>")])]),a("h3",{attrs:{id:"close"}},[a("a",{attrs:{href:"#close","aria-hidden":"true"}},[t._v("#")]),t._v("handler.close"),a("em",[t._v("()")])]),a("p",[t._v('Closes all underlying connections. NOTE: this function will "abort" any pending processes. You might want to call '),a("a",{attrs:{href:"#wait-for-all-dispatches"}},[a("code",{pre:!0},[t._v("waitForAllDispatches()")])]),t._v(" first.")]),a("h4",{attrs:{id:"returns-promise"}},[a("a",{attrs:{href:"#returns-promise","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise")])]),a("h3",{attrs:{id:"create-agent"}},[a("a",{attrs:{href:"#create-agent","aria-hidden":"true"}},[t._v("#")]),t._v("handler.createAgent"),a("em",[t._v("(options)")])]),a("p",[t._v("Creates a new "),a("a",{attrs:{href:"/docs/basic-interfaces/agent"}},[a("code",{pre:!0},[t._v("Agent")])]),t._v(" using one of the "),a("code",{pre:!0},[t._v("Core")]),t._v(" connections initialized in this Handler. If there are no connections with availability (based on "),a("code",{pre:!0},[t._v("maxConcurrency")]),t._v(" setting), the returned promise will not return until one is free.")]),a("p",[t._v("NOTE: when using this method, you must call "),a("a",{attrs:{href:"/docs/basic-interfaces/agent#close"}},[a("code",{pre:!0},[t._v("agent.close()")])]),t._v(" explicitly to allow future Agents to be dispatched or created as needed.")]),a("h4",{attrs:{id:"arguments-3"}},[a("a",{attrs:{href:"#arguments-3","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Arguments")]),t._v(":")]),a("ul",[a("li",[t._v("options "),a("code",{pre:!0},[t._v("object")]),t._v(". Accepts any of the following:"),a("ul",[a("li",[t._v("name "),a("code",{pre:!0},[t._v("string")]),t._v(". This is used to generate a unique sessionName.")]),a("li",[t._v("browserEmulatorId "),a("code",{pre:!0},[t._v("string")]),t._v(" defaults to "),a("code",{pre:!0},[t._v("default-browser-emulator")]),t._v(". Chooses the BrowserEmulator plugin which emulates the properties that help SecretAgent look like a normal browser.")]),a("li",[t._v("humanEmulatorId "),a("code",{pre:!0},[t._v("string")]),t._v(" defaults to "),a("code",{pre:!0},[t._v("default-human-emulator")]),t._v(". Chooses the HumanEmulator plugin which drives the mouse/keyboard movements.")]),a("li",[t._v("timezoneId "),a("code",{pre:!0},[t._v("string")]),t._v(". Overrides the host timezone. A list of valid ids are available at "),a("a",{attrs:{href:"https://unicode-org.github.io/cldr-staging/charts/37/supplemental/zone_tzid.html",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("unicode.org")])]),a("li",[t._v("locale "),a("code",{pre:!0},[t._v("string")]),t._v(". Overrides the host languages settings (eg, en-US). Locale will affect navigator.language value, Accept-Language request header value as well as number and date formatting rules.")]),a("li",[t._v("viewport "),a("code",{pre:!0},[t._v("IViewport")]),t._v(". Sets the emulated screen size, window position in the screen, inner/outer width and height. If not provided, the most popular resolution is used from "),a("a",{attrs:{href:"https://gs.statcounter.com/screen-resolution-stats/desktop/united-states-of-america",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("statcounter.com")]),t._v(".")]),a("li",[t._v("blockedResourceTypes "),a("code",{pre:!0},[t._v("BlockedResourceType[]")]),t._v(". Controls browser resource loading. Valid options are listed "),a("a",{attrs:{href:"/docs/overview/configuration#blocked-resources"}},[t._v("here")]),t._v(".")]),a("li",[t._v("userProfile "),a("code",{pre:!0},[t._v("IUserProfile")]),t._v(". Previous user's cookies, session, etc.")]),a("li",[t._v("showReplay "),a("code",{pre:!0},[t._v("boolean")]),t._v(". Whether or not to show the Replay UI. Can also be set with an env variable: "),a("code",{pre:!0},[t._v("SA_SHOW_REPLAY=true")]),t._v(".")]),a("li",[t._v("input "),a("code",{pre:!0},[t._v("object")]),t._v(". An object containing properties to attach to the agent (more frequently used with "),a("a",{attrs:{href:"#dispatch-agent"}},[a("code",{pre:!0},[t._v("dispatchAgent")])]),t._v(")")]),a("li",[t._v("upstreamProxyUrl "),a("code",{pre:!0},[t._v("string")]),t._v('. A socks5 or http proxy url (and optional auth) to use for all HTTP requests in this session. The optional "auth" should be included in the UserInfo section of the url, eg: '),a("code",{pre:!0},[t._v("http://username:password@proxy.com:80")]),t._v(".")]),a("li",[t._v("upstreamProxyIpMask "),a("code",{pre:!0},[t._v("object")]),t._v(". Optional settings to mask the Public IP Address of a host machine when using a proxy. This is used by the default BrowserEmulator to mask WebRTC IPs."),a("ul",[a("li",[t._v("ipLookupService "),a("code",{pre:!0},[t._v("string")]),t._v(". The URL of an http based IpLookupService. A list of common options can be found in "),a("code",{pre:!0},[t._v("plugins/default-browser-emulator/lib/helpers/lookupPublicIp.ts")]),t._v(". Defaults to "),a("code",{pre:!0},[t._v("ipify.org")]),t._v(".")]),a("li",[t._v("proxyIp "),a("code",{pre:!0},[t._v("string")]),t._v(". The optional IP address of your proxy, if known ahead of time.")]),a("li",[t._v("publicIp "),a("code",{pre:!0},[t._v("string")]),t._v(". The optional IP address of your host machine, if known ahead of time.")])])])])])]),a("p",[t._v("See the "),a("a",{attrs:{href:"/docs/overview/configuration"}},[t._v("Configuration")]),t._v(" page for more details on "),a("code",{pre:!0},[t._v("options")]),t._v(" and its defaults. You may also want to explore "),a("a",{attrs:{href:"/docs/plugins/browser-emulators"}},[t._v("BrowserEmulators")]),t._v(" and "),a("a",{attrs:{href:"/docs/plugins/human-emulators"}},[t._v("HumanEmulators")]),t._v(".")]),a("h4",{attrs:{id:"returns-promiseagent"}},[a("a",{attrs:{href:"#returns-promiseagent","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("a",{attrs:{href:"/docs/basic-interfaces/agent"}},[a("code",{pre:!0},[t._v("Promise<Agent>")])])]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",{pre:!0,attrs:{class:"language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret-agent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" maxConcurrency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("createAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("createAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" agent2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// will be available in 100 ms when agent2 closes")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" agent3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("createAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),a("h3",{attrs:{id:"dispatch-agent"}},[a("a",{attrs:{href:"#dispatch-agent","aria-hidden":"true"}},[t._v("#")]),t._v("handler.dispatchAgent"),a("em",[t._v("(callbackFn, createAgentOptions?)")])]),a("p",[t._v("This method allows you queue up functions that should be called as soon as a connection can allocate a new Agent. All configurations available to "),a("code",{pre:!0},[t._v("createAgent")]),t._v(" are available here.")]),a("p",[t._v("NOTE: you do not need to call close on an Agent when using this method. It will automatically be called when your callback returns.")]),a("p",[t._v("On Disconnecting: if a Core is shut-down or the handler closes a coreConnection while work is still in-progress, the agent commands will throw a "),a("code",{pre:!0},[t._v("DisconnectedFromCoreError")]),t._v(".")]),a("h4",{attrs:{id:"arguments-4"}},[a("a",{attrs:{href:"#arguments-4","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Arguments")]),t._v(":")]),a("ul",[a("li",[t._v("callbackFn "),a("code",{pre:!0},[t._v("(agent) => Promise")]),t._v(". An asynchronous function that will be passed an initialized "),a("a",{attrs:{href:"/docs/basic-interfaces/agent"}},[t._v("Agent")]),t._v(" with the given "),a("code",{pre:!0},[t._v("createAgentOptions")]),t._v(" configuration.")]),a("li",[t._v("createAgentOptions "),a("code",{pre:!0},[t._v("object")]),t._v(". Options used to create a new agent. Takes all options available to "),a("a",{attrs:{href:"#create-agent"}},[a("code",{pre:!0},[t._v("createAgent()")])]),t._v(".")])]),a("h4",{attrs:{id:"returns-void"}},[a("a",{attrs:{href:"#returns-void","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": void")]),a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",{pre:!0,attrs:{class:"language-js"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token maybe-class-name"}},[t._v("Handler")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'secret-agent'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Handler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" maxConcurrency"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("dispatchAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("agent")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("goto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" links "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("document")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("querySelectorAll")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" link "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("of")]),t._v(" links"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" href "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" link"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("getAttribute")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("dispatchAgent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("agent0")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token arrow operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("goto")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("agent0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("link")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" agent0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("document")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("body")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token property-access"}},[t._v("textContent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" href "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// send in data")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" input"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" url"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://dataliberationfoundation.org'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolves when all dispatched agents are completed or an error occurs")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("waitForAllDispatches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[t._v("await")]),t._v(" handler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token method function property-access"}},[t._v("close")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")])])]),a("h3",{attrs:{id:"wait-for-all-dispatches"}},[a("a",{attrs:{href:"#wait-for-all-dispatches","aria-hidden":"true"}},[t._v("#")]),t._v("handler.waitForAllDispatches"),a("em",[t._v("()")])]),a("p",[t._v("Waits for all agents which have been created using "),a("code",{pre:!0},[t._v("dispatchAgent")]),t._v(" to complete. If any errors are thrown by Agents, the first exception will be thrown upon awaiting this method.")]),a("h4",{attrs:{id:"returns-promisedispatchresult"}},[a("a",{attrs:{href:"#returns-promisedispatchresult","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise<DispatchResult[]>")])]),a("ul",[a("li",[t._v("DispatchResult"),a("ul",[a("li",[t._v("sessionId "),a("code",{pre:!0},[t._v("string key")]),t._v(". The session id assigned to the dispatched Agent.")]),a("li",[t._v("name "),a("code",{pre:!0},[t._v("string")]),t._v(". The name assigned to this session.")]),a("li",[t._v("input "),a("code",{pre:!0},[t._v("any")]),t._v(". Any input arguments passed to the dispatched Agent.")]),a("li",[t._v("output "),a("code",{pre:!0},[t._v("any?")]),t._v(". The object set to agent.output if no error thrown.")]),a("li",[t._v("error "),a("code",{pre:!0},[t._v("Error?")]),t._v(". An error if one has been thrown during dispatch.")]),a("li",[t._v("options "),a("code",{pre:!0},[t._v("CreateAgentOptions")]),t._v(". Any arguments passed to the dispatched Agent.")])])])]),a("h3",{attrs:{id:"wait-for-all-dispatches-settled"}},[a("a",{attrs:{href:"#wait-for-all-dispatches-settled","aria-hidden":"true"}},[t._v("#")]),t._v("handler.waitForAllDispatchesSettled"),a("em",[t._v("()")])]),a("p",[t._v("Waits for all agents which have been created using "),a("code",{pre:!0},[t._v("dispatchAgent")]),t._v(" to complete or throw an error. This method will always wait for all dispatches to finish, regardless of errors thrown. This is different from "),a("code",{pre:!0},[t._v("waitForAllDispatches")]),t._v(", which will throw on any dispatch errors.")]),a("h4",{attrs:{id:"returns-promisedispatchresult-1"}},[a("a",{attrs:{href:"#returns-promisedispatchresult-1","aria-hidden":"true"}},[t._v("#")]),a("strong",[t._v("Returns")]),t._v(": "),a("code",{pre:!0},[t._v("Promise<DispatchResult[]>")])])])}),[],!1,null,null,null);"function"==typeof c&&c(u),"function"==typeof _&&_(u);s.default=u.exports},vu0Y:function(t,s,a){"use strict";s.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);