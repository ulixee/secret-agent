(window.webpackJsonp=window.webpackJsonp||[]).push([[218],{Ui1s:function(e,t,s){"use strict";s.r(t);var r=s("Ow4o"),o=s("vu0Y"),n=s("pLV6");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.a.config.optionMergeStrategies;var i={VueRemarkRoot:o.a},c=function(e){var t=e.options.components=e.options.components||{},s=e.options.computed=e.options.computed||{};Object.keys(i).forEach((function(e){"object"===a(i[e])&&"function"==typeof i[e].render||"function"==typeof i[e]&&"function"==typeof i[e].options.render?t[e]=i[e]:s[e]=function(){return i[e]}}))},p=n.a.config.optionMergeStrategies,v="__vueRemarkFrontMatter",l={excerpt:null,title:"Configuration"};var d=function(e){e.options[v]&&(e.options[v]=l),n.a.util.defineReactive(e.options,v,l),e.options.computed=p.computed({$frontmatter:function(){return e.options[v]}},e.options.computed)},u=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("VueRemarkRoot",[s("h1",{attrs:{id:"configuration"}},[s("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v("Configuration")]),s("p",[e._v("Configuration variables can be defined at a few levels:")]),s("ul",[s("li",[s("code",{pre:!0},[e._v("Agent")]),e._v(" At an instance level, configured via "),s("a",{attrs:{href:"/docs/basic-interfaces/agent#configure"}},[e._v("agent.configure()")]),e._v(" or "),s("a",{attrs:{href:"/docs/basic-interfaces/agent#constructor"}},[e._v("new Agent()")]),e._v(", or when creating "),s("a",{attrs:{href:"/docs/basic-interfaces/handler"}},[e._v("Handler")]),e._v(" agents using "),s("a",{attrs:{href:"/docs/basic-interfaces/handler#create-agent"}},[e._v("handler.createAgent()")]),e._v(" or "),s("a",{attrs:{href:"/docs/basic-interfaces/handler#dispatch-agent"}},[e._v("handler.dispatchAgent()")]),e._v(".")]),s("li",[s("code",{pre:!0},[e._v("Connection")]),e._v(" At a connection level, which can be configured when creating a new "),s("a",{attrs:{href:"/docs/advanced/connection-to-core#configuration"}},[e._v("ConnectionToCore")]),e._v(".")]),s("li",[s("code",{pre:!0},[e._v("Core")]),e._v(" At an internal level, using the "),s("code",{pre:!0},[e._v("@secret-agent/core")]),e._v(" module of SecretAgent. This must be run in the environment where your Browser Engine(s) and "),s("code",{pre:!0},[e._v("@secret-agent/core")]),e._v(" module are running. If you're running remote, this will be your server.")])]),s("p",[e._v("The internal "),s("code",{pre:!0},[e._v("@secret-agent/core")]),e._v(" module can receive several configuration options on "),s("a",{attrs:{href:"#core-start"}},[e._v("start")]),e._v(", or when a "),s("a",{attrs:{href:"/docs/basic-interfaces/handler"}},[e._v("Handler")]),e._v(" or "),s("a",{attrs:{href:"/docs/basic-interfaces/agent"}},[e._v("Agent")]),e._v(" establishes a "),s("a",{attrs:{href:"/docs/advanced/connection-to-core"}},[e._v("connection")]),e._v(".")]),s("h3",{attrs:{id:"connection-to-core-div-classspecsiagentidiv"}},[s("a",{attrs:{href:"#connection-to-core-div-classspecsiagentidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Connection To Core "),s("div",{staticClass:"specs"},[s("i",[e._v("Agent")])])]),s("p",[e._v("The "),s("a",{attrs:{href:"/docs/advanced/connection-to-core"}},[e._v("ConnectionToCore")]),e._v(" to be used by a "),s("a",{attrs:{href:"/docs/basic-interfaces/handler"}},[e._v("Handler")]),e._v(" or "),s("a",{attrs:{href:"/docs/basic-interfaces/agent"}},[e._v("Agent")]),e._v(".")]),s("p",[e._v("All "),s("a",{attrs:{href:"/docs/advanced/connection-to-core#configurations"}},[e._v("configurations")]),e._v(" accept both an "),s("code",{pre:!0},[e._v("options")]),e._v(" object and a "),s("a",{attrs:{href:"/docs/advanced/connection-to-core"}},[s("code",{pre:!0},[e._v("ConnectionToCore")])]),e._v(" instance.")]),s("p",[e._v("Configuration is accepted in the following methods and constructors:")]),s("ul",[s("li",[s("a",{attrs:{href:"/docs/basic-interfaces/agent#configure"}},[e._v("agent.configure()")]),e._v(" - apply the connection to the default agent, or to a an agent constructed prior to the first connection.")]),s("li",[s("a",{attrs:{href:"/docs/basic-interfaces/agent#constructor"}},[e._v("new Agent()")]),e._v(" - the new agent will use this connection.")]),s("li",[s("a",{attrs:{href:"/docs/basic-interfaces/handler#constructor"}},[e._v("new Handler(...connections)")]),e._v(" - a handler takes one or more coreClientConnection options or instances.")])]),s("h3",{attrs:{id:"max-concurrent-agents-count-div-classspecsicoreidiv"}},[s("a",{attrs:{href:"#max-concurrent-agents-count-div-classspecsicoreidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Max Concurrent Agents Count "),s("div",{staticClass:"specs"},[s("i",[e._v("Core")])])]),s("p",[e._v("Limit concurrent Agents operating at any given time across all "),s("a",{attrs:{href:"/docs/advanced/connection-to-core"}},[e._v("connections")]),e._v(' to a "Core". Defaults to '),s("code",{pre:!0},[e._v("10")]),e._v(".")]),s("p",[e._v("Configurable via "),s("a",{attrs:{href:"#core-start"}},[s("code",{pre:!0},[e._v("Core.start()")])]),e._v(" or "),s("a",{attrs:{href:"/docs/advanced/connection-to-core#configuration"}},[s("code",{pre:!0},[e._v("ConnectionToCore")])]),e._v(".")]),s("h3",{attrs:{id:"local-proxy-port-start-div-classspecsiconnectioniicoreidiv"}},[s("a",{attrs:{href:"#local-proxy-port-start-div-classspecsiconnectioniicoreidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Local Proxy Port Start "),s("div",{staticClass:"specs"},[s("i",[e._v("Connection")]),s("i",[e._v("Core")])])]),s("p",[e._v("Configures the port the Man-In-the-Middle server will listen on locally. This server will correct headers and TLS signatures sent by requests to properly emulate the desired browser engine. Default port is "),s("code",{pre:!0},[e._v("0")]),e._v(", which will find an open port locally.")]),s("p",[e._v("Configurable via "),s("a",{attrs:{href:"#core-start"}},[s("code",{pre:!0},[e._v("Core.start()")])]),e._v(" or the first "),s("a",{attrs:{href:"/docs/advanced/connection-to-core#configuration"}},[s("code",{pre:!0},[e._v("ConnectionToCore")])]),e._v(".")]),s("h3",{attrs:{id:"replay-session-port-div-classspecsiconnectioniicoreidiv"}},[s("a",{attrs:{href:"#replay-session-port-div-classspecsiconnectioniicoreidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Replay Session Port "),s("div",{staticClass:"specs"},[s("i",[e._v("Connection")]),s("i",[e._v("Core")])])]),s("p",[e._v("Configures the port Replay uses to serve Session data.")]),s("p",[e._v("Configurable via "),s("a",{attrs:{href:"#core-start"}},[s("code",{pre:!0},[e._v("Core.start()")])]),e._v(" or the first "),s("a",{attrs:{href:"/docs/advanced/connection-to-core#configuration"}},[s("code",{pre:!0},[e._v("ConnectionToCore")])]),e._v(".")]),s("h3",{attrs:{id:"sessions-dir"}},[s("a",{attrs:{href:"#sessions-dir","aria-hidden":"true"}},[e._v("#")]),e._v("Sessions Dir "),s("div",{staticClass:"specs"},[s("i",[e._v("Connection")]),s("i",[e._v("Core")])])]),s("p",[e._v("Configures the storage location for files created by Core.")]),s("ul",[s("li",[e._v("Replay session files")]),s("li",[e._v("Man-in-the-middle network certificates")])]),s("p",[s("code",{pre:!0},[e._v("Environmental variable")]),e._v(": "),s("code",{pre:!0},[e._v("SA_SESSIONS_DIR=/your-absolute-dir-path")])]),s("p",[e._v("Configurable via "),s("a",{attrs:{href:"#core-start"}},[s("code",{pre:!0},[e._v("Core.start()")])]),e._v(" or the first "),s("a",{attrs:{href:"/docs/advanced/connection-to-core"}},[s("code",{pre:!0},[e._v("ConnectionToCore")])]),e._v(".")]),s("h3",{attrs:{id:"blocked-resources"}},[s("a",{attrs:{href:"#blocked-resources","aria-hidden":"true"}},[e._v("#")]),e._v("Blocked Resource Types "),s("div",{staticClass:"specs"},[s("i",[e._v("Connection")]),s("i",[e._v("Agent")])])]),s("p",[e._v("One of the best ways to optimize SecretAgent's memory and CPU is setting "),s("code",{pre:!0},[e._v("blockedResourceTypes")]),e._v(" to block resources you don't need. The following are valid options.")]),s("p",{staticClass:"show-table-header show-bottom-border minimal-row-height"}),s("table",[s("thead",[s("tr",[s("th",[e._v("Options")]),s("th",[e._v("Description")])])]),s("tbody",[s("tr",[s("td",[s("code",{pre:!0},[e._v("JsRuntime")])]),s("td",[e._v("Executes JS in webpage. Requires "),s("code",{pre:!0},[e._v("AwaitedDOM")]),e._v(".")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("BlockJsAssets")])]),s("td",[e._v("Loads all referenced script assets. Requires "),s("code",{pre:!0},[e._v("JsRuntime")]),e._v(".")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("BlockCssAssets")])]),s("td",[e._v("Loads all referenced CSS assets. Requires "),s("code",{pre:!0},[e._v("JsRuntime")]),e._v(".")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("BlockImages")])]),s("td",[e._v("Loads all referenced images on page. Requires "),s("code",{pre:!0},[e._v("JsRuntime")]),e._v(".")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("BlockAssets")])]),s("td",[e._v("Shortcut for "),s("code",{pre:!0},[e._v("LoadJsAssets")]),e._v(", "),s("code",{pre:!0},[e._v("LoadCssAssets")]),e._v(" and "),s("code",{pre:!0},[e._v("LoadImages")]),e._v(".")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("All")])]),s("td",[e._v("Blocks all of the resources above. Only retrieves window.response.")])]),s("tr",[s("td",[s("code",{pre:!0},[e._v("None")])]),s("td",[e._v("No assets are blocked. "),s("code",{pre:!0},[e._v("default")])])])])]),s("p",[e._v("As you'll notice above, some features are dependent on others and therefore automatically enable other features.")]),s("p",[e._v("Setting an empty array is the same as setting to "),s("code",{pre:!0},[e._v("None")]),e._v(".")]),s("h3",{attrs:{id:"user-profile-div-classspecsiconnectioniiagentidiv"}},[s("a",{attrs:{href:"#user-profile-div-classspecsiconnectioniiagentidiv","aria-hidden":"true"}},[e._v("#")]),e._v("User Profile "),s("div",{staticClass:"specs"},[s("i",[e._v("Connection")]),s("i",[e._v("Agent")])])]),s("p",[e._v("A user profile stores and restores Cookies, DOM Storage and IndexedDB records for an Agent. NOTE: the serialized user profile passed into an Agent instance is never modified. If you want to update a profile with changes, you should re-export and save it to the format you're persisting to.")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",{pre:!0,attrs:{class:"language-js"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" rawProfileJson "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("readFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'profile.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'utf-8'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" profile "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token known-class-name class-name"}},[e._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("rawProfileJson"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// { cookies: { sessionId: 'test' }}")]),e._v("\n\nagent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("configure")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[e._v("userProfile")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" profile "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" latestUserProfile "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[e._v("await")]),e._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("exportUserProfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// { cookies, localStorage, sessionStorage, indexedDBs }")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[e._v("await")]),e._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("goto")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'http://example.com'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" latestUserProfile "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword control-flow"}},[e._v("await")]),e._v(" agent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("exportUserProfile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("writeFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'profile.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token known-class-name class-name"}},[e._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token method function property-access"}},[e._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("latestUserProfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword null nil"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")])])]),s("h3",{attrs:{id:"upstream-proxy-div-classspecsiagentidiv"}},[s("a",{attrs:{href:"#upstream-proxy-div-classspecsiagentidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Upstream Proxy "),s("div",{staticClass:"specs"},[s("i",[e._v("Agent")])])]),s("p",[e._v("Configures a proxy url to route traffic through for a given Agent. This function supports two types of proxies:")]),s("ul",[s("li",[s("code",{pre:!0},[e._v("Socks5")]),e._v(" - many VPN providers allow you to use a socks5 configuration to send traffic through one of their VPNs behind the scenes. You can pass any required username and password through the "),s("code",{pre:!0},[e._v("UserInfo")]),e._v(" portion of the url, e.g., "),s("code",{pre:!0},[e._v("socks5://username:password@sockshost.com:1080")]),e._v(".")]),s("li",[s("code",{pre:!0},[e._v("Http")]),e._v(" - an http proxy will create secure TLS socket to an upstream server using the HTTP connect verb. Services like "),s("a",{attrs:{href:"https://luminati.io",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("luminati")]),e._v(' provide highly configurable Http proxies that can route traffic from various geographic locations and "grade" of IP - ie, consumer IP vs datacenter.')])]),s("p",[e._v("An upstream proxy url should be a fully formatted url to the proxy. If your proxy is socks5, start it with "),s("code",{pre:!0},[e._v("socks5://")]),e._v(", http "),s("code",{pre:!0},[e._v("http://")]),e._v(" or "),s("code",{pre:!0},[e._v("https://")]),e._v(" as needed. An upstream proxy url can optionally include the user authentication parameters in the url. It will be parsed out and used as the authentication.")]),s("h3",{attrs:{id:"browsers-emulator-id-div-classspecsiagentidiv"}},[s("a",{attrs:{href:"#browsers-emulator-id-div-classspecsiagentidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Browsers Emulator Id "),s("div",{staticClass:"specs"},[s("i",[e._v("Agent")])])]),s("p",[e._v("Configures which "),s("a",{attrs:{href:"/docs/plugins/browser-emulators"}},[e._v("BrowserEmulator")]),e._v(" to use in a given Agent.")]),s("h3",{attrs:{id:"human-emulator-id-div-classspecsiagentidiv"}},[s("a",{attrs:{href:"#human-emulator-id-div-classspecsiagentidiv","aria-hidden":"true"}},[e._v("#")]),e._v("Human Emulator Id "),s("div",{staticClass:"specs"},[s("i",[e._v("Agent")])])]),s("p",[e._v("Configures which "),s("a",{attrs:{href:"/docs/plugins/human-emulators"}},[e._v("HumanEmulator")]),e._v(" to use in an Agent instance.")]),s("h2",{attrs:{id:"core-configuration"}},[s("a",{attrs:{href:"#core-configuration","aria-hidden":"true"}},[e._v("#")]),e._v("Core Configuration")]),s("p",[e._v("Configuration for Core should be performed before initialization.")]),s("h3",{attrs:{id:"core-start"}},[s("a",{attrs:{href:"#core-start","aria-hidden":"true"}},[e._v("#")]),e._v("Core.start"),s("em",[e._v("(options)")])]),s("p",[e._v("Update existing settings.")]),s("h4",{attrs:{id:"arguments"}},[s("a",{attrs:{href:"#arguments","aria-hidden":"true"}},[e._v("#")]),s("strong",[e._v("Arguments")]),e._v(":")]),s("ul",[s("li",[e._v("options "),s("code",{pre:!0},[e._v("object")]),e._v(" Accepts any of the following:"),s("ul",[s("li",[e._v("maxConcurrentAgentsCount "),s("code",{pre:!0},[e._v("number")]),e._v(" defaults to "),s("code",{pre:!0},[e._v("10")]),e._v(". Limit concurrent Agent sessions running at any given time.")]),s("li",[e._v("localProxyPortStart "),s("code",{pre:!0},[e._v("number")]),e._v(" defaults to "),s("code",{pre:!0},[e._v("any open port")]),e._v(". Starting internal port to use for the mitm proxy.")]),s("li",[e._v("sessionsDir "),s("code",{pre:!0},[e._v("string")]),e._v(" defaults to "),s("code",{pre:!0},[e._v("os.tmpdir()/.secret-agent")]),e._v(". Directory to store session files and mitm certificates.")]),s("li",[e._v("coreServerPort "),s("code",{pre:!0},[e._v("number")]),e._v(". Port to run the Core Websocket/Replay server on.")])])])]),s("h4",{attrs:{id:"returns-promise"}},[s("a",{attrs:{href:"#returns-promise","aria-hidden":"true"}},[e._v("#")]),s("strong",[e._v("Returns")]),e._v(": "),s("code",{pre:!0},[e._v("Promise")])])])}),[],!1,null,null,null);"function"==typeof c&&c(u),"function"==typeof d&&d(u);t.default=u.exports},vu0Y:function(e,t,s){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}}}]);